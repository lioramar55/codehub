<div
  class="h-screen w-screen grid grid-cols-[320px_1fr] bg-bg-chat text-gray-900"
>
  <!-- Left sidebar: chats + profile -->
  <aside class="border-r border-gray-200 bg-white flex flex-col">
    <div class="p-4 border-b border-gray-200 flex items-center gap-3">
      <img
        [src]="user().avatarUrl"
        alt="avatar"
        class="h-10 w-10 rounded-full"
      />
      <div>
        <div class="font-semibold">{{ user().name }}</div>
        <button
          class="text-xs text-blue-600 hover:underline"
          (click)="editProfile = !editProfile"
        >
          Edit
        </button>
      </div>
    </div>

    @if (editProfile) {
    <div class="p-4 border-b border-gray-200 space-y-2">
      <input
        class="input"
        type="text"
        [value]="user().name"
        (change)="onNameChange($event)"
        placeholder="Your name"
      />
      <input
        class="input"
        type="url"
        [value]="user().avatarUrl ?? ''"
        (change)="onAvatarChange($event)"
        placeholder="Avatar URL"
      />
    </div>
    }

    <div class="p-2 text-xs uppercase tracking-wide text-gray-500">Chats</div>
    <nav class="overflow-y-auto">
      @for (r of rooms(); track r.id) {
      <a
        [routerLink]="['/chat', r.id]"
        routerLinkActive="bg-blue-50"
        class="block px-4 py-3 hover:bg-gray-50 border-b border-gray-50"
        (click)="chat.setActiveRoom(r.id)"
      >
        <div class="font-medium">{{ r.name }}</div>
        @if (r.lastMessage; as lm) {
        <div class="text-xs text-gray-500">
          {{ lm.author.name }}: {{ lm.content }}
        </div>
        }
      </a>
      }
    </nav>
  </aside>

  <!-- Right content: router outlet for room -->
  <section class="min-w-0">
    <router-outlet />
  </section>
</div>
